<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FM24 Player Recruitment</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}" />
</head>
<body>
  <main>
    <div class="container">
      <h1>FM24 Player recruitment Using Python</h1>
      <p>
        Based on <a href="https://www.youtube.com/watch?v=hnAuOakqR90" target="_blank">this video</a>
        by <a href="https://twitter.com/playingsquirrel" target="_blank">squirrel_plays</a>.
        Values in brackets <code>(afa)</code> are what will be shown in the returned table.
      </p>
      <form method="POST" enctype="multipart/form-data" action="/upload">
        <input type="file" name="file">
        <hr>
        <p>Select Roles to Display: (8 Max)</p>
        <details role="list">
          <summary aria-haspopup="listbox">Select up to 8 roles</summary>
          <ul role="listbox" id="roleField">
            {% for function_name, values in function_names.items() %}
            <li>
              <label>
                <input type="checkbox" name="{{values.1}}" value="{{ function_name }}">{{values.0}} ({{values.1}})<br>
              </label>
            </li>
            {% endfor %}
          </ul>
        </details>
        <hr>
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul class="flashes">
              {% for message in messages %}
                <li>{{ message }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
        <input type="submit" value="Upload">
      </form>
    </div>
  </main>
  <script>
    const maxAllowed = 8;
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  
    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', function() {
        let checkedCount = document.querySelectorAll('input[type="checkbox"]:checked').length;
        if (checkedCount > maxAllowed) {
          this.checked = false;
        }
      });
    });
  </script>
</body>
</html>